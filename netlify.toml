[build]
  command   = "npm run build"
  publish   = "dist/public"
  functions = "dist/functions"

[functions]
  node_bundler = "esbuild"

[build.environment]
  NODE_ENV = "development"   # install devDependencies during npm install

# API â†’ Function mappings
[[redirects]]
  from   = "/api/contact"
  to     = "/.netlify/functions/contact"
  status = 200
  force  = true

[[redirects]]
  from   = "/api/waitlist"
  to     = "/.netlify/functions/waitlist"
  status = 200
  force  = true

[[redirects]]
  from   = "/api/waitlist/count"
  to     = "/.netlify/functions/waitlist-count"
  status = 200
  force  = true

# (optional) remove or keep as needed
[[redirects]]
  from   = "/api/debug/airtable"
  to     = "/.netlify/functions/debug-airtable"
  status = 200
  force  = true

# SPA fallback (keep at bottom)
[[redirects]]
  from   = "/*"
  to     = "/index.html"
  status = 200
